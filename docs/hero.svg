<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="360" viewBox="0 0 1200 360" role="img" aria-label="nsys-llm-explain pipeline diagram">
  <defs>
    <style>
      .bg { fill: #0b1220; }
      .box { fill: #0f1a33; stroke: #2a3a66; stroke-width: 2; rx: 14; ry: 14; }
      .title { fill: #e6eefc; font: 700 24px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
      .text { fill: #c7d4f4; font: 600 16px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
      .muted { fill: #93a6d6; font: 500 14px ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
      .mono { fill: #d7e2ff; font: 600 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      .arrow { stroke: #6aa6ff; stroke-width: 3; fill: none; }
      .pill { fill: #152552; stroke: #2a3a66; stroke-width: 1.5; rx: 10; ry: 10; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="#6aa6ff" />
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="360" />

  <text class="title" x="42" y="56">Nsight Systems SQLite to actionable LLM hotspot report</text>
  <text class="muted" x="42" y="82">Offline: trace.sqlite in, report.md/json + CSV tables out (A100-first; multi-process aware).</text>

  <!-- Pipeline stages -->
  <rect class="box" x="40" y="120" width="250" height="170" />
  <text class="text" x="64" y="154">1) Capture</text>
  <text class="mono" x="64" y="182">nsys profile ...</text>
  <text class="muted" x="64" y="212">CUDA (+ optional NVTX)</text>
  <text class="muted" x="64" y="236">inference workload</text>

  <rect class="box" x="330" y="120" width="250" height="170" />
  <text class="text" x="354" y="154">2) Export</text>
  <text class="mono" x="354" y="182">nsys export --type sqlite</text>
  <text class="muted" x="354" y="212">produces</text>
  <text class="mono" x="354" y="236">trace.sqlite</text>

  <rect class="box" x="620" y="120" width="250" height="170" />
  <text class="text" x="644" y="154">3) Explain</text>
  <text class="mono" x="644" y="182">nsys-llm-explain trace.sqlite</text>
  <text class="muted" x="644" y="212">schema probing + fallbacks</text>
  <text class="muted" x="644" y="236">NVTX coverage + per-PID (best-effort)</text>

  <rect class="box" x="910" y="120" width="250" height="170" />
  <text class="text" x="934" y="154">4) Outputs</text>
  <text class="mono" x="934" y="182">report.md</text>
  <text class="mono" x="934" y="204">report.json</text>
  <text class="mono" x="934" y="226">tables/*.csv</text>

  <!-- Arrows -->
  <path class="arrow" d="M290 205 L330 205" marker-end="url(#arrowhead)" />
  <path class="arrow" d="M580 205 L620 205" marker-end="url(#arrowhead)" />
  <path class="arrow" d="M870 205 L910 205" marker-end="url(#arrowhead)" />

  <!-- Output highlights -->
  <rect class="pill" x="932" y="248" width="206" height="28" />
  <text class="muted" x="944" y="268">Top kernels + percentiles</text>

  <rect class="pill" x="932" y="282" width="206" height="28" />
  <text class="muted" x="944" y="302">Launch storm + suspects</text>

  <rect class="pill" x="932" y="316" width="206" height="28" />
  <text class="muted" x="944" y="336">Sync, idle gaps, NVTX, per-PID</text>
  </svg>
